<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (git.Git.Sync.S)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">git</a></span></nav><header><h1><span class="keyword">Module type</span> <span class="module-path">Git.Sync.S</span></h1></header><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>Abstract value for stores.</p></div></div><div class="spec type" id="type-ctx"><a href="#type-ctx" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>ctx</code><code></code><code></code></div><div class="doc"><p>Connection context</p></div></div><h2>The base Git protocol and Git+SSH</h2><div class="spec val" id="val-ls"><a href="#val-ls" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>ls : ?&#8288;ctx:<a href="index.html#type-ctx">ctx</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Gri/index.html#type-t">Gri.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Hash/index.html#type-t">Hash.t</a> <a href="../../Reference/index.html#module-Map">Reference.Map</a>.t Lwt.t</code></div><div class="doc"><p>List the references of the remote repository.</p></div></div><div class="spec val" id="val-push"><a href="#val-push" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>push : ?&#8288;ctx:<a href="index.html#type-ctx">ctx</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> branch:<a href="../../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Gri/index.html#type-t">Gri.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Result/index.html#type-push">Result.push</a> Lwt.t</code></div><div class="doc"><p>Push a local branch to a remote store.</p></div></div><div class="spec val" id="val-fetch"><a href="#val-fetch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fetch : ?&#8288;ctx:<a href="index.html#type-ctx">ctx</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;deepen:int <span class="keyword">&#8209;&gt;</span> ?&#8288;unpack:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;capabilities:<a href="../index.html#type-capability">capability</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;wants:<a href="../index.html#type-want">want</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;progress:(string <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Gri/index.html#type-t">Gri.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Result/index.html#type-fetch">Result.fetch</a> Lwt.t</code></div><div class="doc"><p><code class="code">fetch t uri</code> fetches the contents of <code class="code">uri</code> into the store <code class="code">t</code>.</p><p>By default, all the remote references are updated. This behavior
can be changed by using the <code class="code">wants</code> parameter:</p><ul><li>if <code class="code">wants</code> is not specified, the objects corresponding to <b>all</b> the remote references are downloaded. This is useful
when cloning a new repository as the remote references are
not yet known.</li><li>If a reference (e.g. a <code class="code">`Ref</code><a href="../index.html#type-want">want</a> value) appears in the
list, the object corresponding to that remote reference are
fetched. This works only if the server exports the
&quot;allow-reachable-sha1-in-want&quot; (available in Git 2.5.0)</li><li>If a commit hash (e.g. a <code class="code">`Commit</code><a href="../index.html#type-want">want</a> value) in the
list, the objects corresponding to the that remote commits
are fetched..</li></ul><p><b>Note:</b> the local HEAD is not modified when doing a fetch. To do so
(for instance when doing a clone) do the following:</p><pre><code class="code">          fetch t gri &gt;&gt;= fun r -&gt;
          match Result.head_contents r with
          | Some h -&gt; Store.write_head t h
          | None   -&gt; Lwt.return_unit</code></pre></div></div><div class="spec val" id="val-clone"><a href="#val-clone" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>clone : ?&#8288;ctx:<a href="index.html#type-ctx">ctx</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;deepen:int <span class="keyword">&#8209;&gt;</span> ?&#8288;unpack:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;capabilities:<a href="../index.html#type-capability">capability</a> list <span class="keyword">&#8209;&gt;</span> ?&#8288;branch:<a href="../index.html#type-want">want</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;progress:(string <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> checkout:bool <span class="keyword">&#8209;&gt;</span> <a href="../../Gri/index.html#type-t">Gri.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Result/index.html#type-fetch">Result.fetch</a> Lwt.t</code></div><div class="doc"><p>Similar to <a href="index.html#val-fetch">fetch</a> but also initialise <code class="code">HEAD</code> and a the
specified <code class="code">branch</code>. If <code class="code">branch</code> is not specified, initialise all
the references that the remote repository exposes.</p></div></div></body></html>