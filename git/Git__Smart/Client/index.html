<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Client (git.Git__Smart.Client)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">git</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Git__Smart.Client</span></h1></header><div class="doc"><p>The <i>functor</i> to make the Client by a specific hash implementation.</p></div><h3 class="heading">Parameters</h3><div><div class="spec argument" id="argument-2-Reference"><a href="#argument-2-Reference" class="anchor"></a><div class="def argument"><code><a href="argument-2-Reference/index.html">Reference</a> : <a href="../../Git/Reference/index.html#module-type-S">Git.Reference.S</a><span class="keyword"> with </span><span class="keyword">module </span><a href="argument-2-Reference/Hash/index.html">Hash</a> := <a href="index.html#argument-1-Hash">Hash</a></code></div><div class="doc"></div></div><div class="spec argument" id="argument-1-Hash"><a href="#argument-1-Hash" class="anchor"></a><div class="def argument"><code><a href="argument-1-Hash/index.html">Hash</a> : <a href="../../Git__/S/index.html#module-type-HASH">Git__.S.HASH</a></code></div><div class="doc"></div></div></div><h3 class="heading">Signature</h3><div class="spec module" id="module-Hash"><a href="#module-Hash" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Hash/index.html">Hash</a> : <a href="../../Git__/S/index.html#module-type-HASH">Git__.S.HASH</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Reference"><a href="#module-Reference" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Reference/index.html">Reference</a> : <a href="../../Git/Reference/index.html#module-type-S">Git.Reference.S</a><span class="keyword"> with </span><span class="keyword">module </span><a href="../../Git/Reference/module-type-S/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Common"><a href="#module-Common" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Common/index.html">Common</a> : <a href="../index.html#module-type-COMMON">COMMON</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../module-type-COMMON/index.html#type-hash">hash</a> := <a href="index.html#module-Hash">Hash</a>.t<span class="keyword"> and </span><span class="keyword">type </span><a href="../module-type-COMMON/index.html#type-reference">reference</a> := <a href="Reference/index.html#type-t">Reference.t</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Decoder"><a href="#module-Decoder" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Decoder/index.html">Decoder</a> : <a href="../index.html#module-type-DECODER">DECODER</a><span class="keyword"> with </span><span class="keyword">module </span><a href="../module-type-DECODER/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a><span class="keyword"> and </span><span class="keyword">module </span><a href="../module-type-DECODER/Reference/index.html">Reference</a> := <a href="index.html#module-Reference">Reference</a><span class="keyword"> and </span><span class="keyword">module </span><a href="../module-type-DECODER/Common/index.html">Common</a> := <a href="index.html#module-Common">Common</a></code></div><div class="doc"><p>The <a href="Decoder/index.html">Decoder</a> module constrained by the same <code class="code">Hash</code> module.</p></div></div><div class="spec module" id="module-Encoder"><a href="#module-Encoder" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Encoder/index.html">Encoder</a> : <a href="../index.html#module-type-ENCODER">ENCODER</a><span class="keyword"> with </span><span class="keyword">module </span><a href="../module-type-ENCODER/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a><span class="keyword"> and </span><span class="keyword">module </span><a href="../module-type-ENCODER/Reference/index.html">Reference</a> := <a href="index.html#module-Reference">Reference</a><span class="keyword"> and </span><span class="keyword">module </span><a href="../module-type-ENCODER/Common/index.html">Common</a> := <a href="index.html#module-Common">Common</a></code></div><div class="doc"><p>The <a href="Encoder/index.html">Encoder</a> module constrained by the same <code class="code">Hash</code> module.</p></div></div><div class="spec type" id="type-context"><a href="#type-context" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>context</code><code></code><code></code></div><div class="doc"><p>The type context.</p></div></div><div class="spec val" id="val-capabilities"><a href="#val-capabilities" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>capabilities : <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Git/Capability/index.html#type-t">Git.Capability.t</a> list</code></div><div class="doc"><p><code class="code">capabilities context</code> returns the current shared capabilities between
the client and the server.</p></div></div><div class="spec val" id="val-set_capabilities"><a href="#val-set_capabilities" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set_capabilities : <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="../../Git/Capability/index.html#type-t">Git.Capability.t</a> list <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code class="code">set_capabilities context cs</code> sets the current capabilities of the
<code class="code">context</code>.</p></div></div><div class="spec type" id="type-result"><a href="#type-result" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>result</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-result.Refs" class="anchored"><td class="def constructor"><a href="#type-result.Refs" class="anchor"></a><code><span class="keyword">| </span></code><code>`Refs<span class="keyword"> of </span><a href="Common/index.html#type-advertised_refs">Common.advertised_refs</a></code></td></tr><tr id="type-result.ShallowUpdate" class="anchored"><td class="def constructor"><a href="#type-result.ShallowUpdate" class="anchor"></a><code><span class="keyword">| </span></code><code>`ShallowUpdate<span class="keyword"> of </span><a href="Common/index.html#type-shallow_update">Common.shallow_update</a></code></td></tr><tr id="type-result.Negociation" class="anchored"><td class="def constructor"><a href="#type-result.Negociation" class="anchor"></a><code><span class="keyword">| </span></code><code>`Negociation<span class="keyword"> of </span><a href="Common/index.html#type-acks">Common.acks</a></code></td></tr><tr id="type-result.NegociationResult" class="anchored"><td class="def constructor"><a href="#type-result.NegociationResult" class="anchor"></a><code><span class="keyword">| </span></code><code>`NegociationResult<span class="keyword"> of </span><a href="Common/index.html#type-negociation_result">Common.negociation_result</a></code></td></tr><tr id="type-result.PACK" class="anchored"><td class="def constructor"><a href="#type-result.PACK" class="anchor"></a><code><span class="keyword">| </span></code><code>`PACK<span class="keyword"> of </span><a href="Decoder/index.html#type-flow">Decoder.flow</a></code></td></tr><tr id="type-result.Flush" class="anchored"><td class="def constructor"><a href="#type-result.Flush" class="anchor"></a><code><span class="keyword">| </span></code><code>`Flush</code></td></tr><tr id="type-result.Nothing" class="anchored"><td class="def constructor"><a href="#type-result.Nothing" class="anchor"></a><code><span class="keyword">| </span></code><code>`Nothing</code></td></tr><tr id="type-result.ReadyPACK" class="anchored"><td class="def constructor"><a href="#type-result.ReadyPACK" class="anchor"></a><code><span class="keyword">| </span></code><code>`ReadyPACK<span class="keyword"> of </span>Cstruct.t</code></td></tr><tr id="type-result.ReportStatus" class="anchored"><td class="def constructor"><a href="#type-result.ReportStatus" class="anchor"></a><code><span class="keyword">| </span></code><code>`ReportStatus<span class="keyword"> of </span><a href="Common/index.html#type-report_status">Common.report_status</a></code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The possible repsonse of the server.</p></div></div><div class="spec type" id="type-process"><a href="#type-process" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>process</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-process.Read" class="anchored"><td class="def constructor"><a href="#type-process.Read" class="anchor"></a><code><span class="keyword">| </span></code><code>`Read<span class="keyword"> of </span>Cstruct.t<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>(int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a>)</code></td></tr><tr id="type-process.Write" class="anchored"><td class="def constructor"><a href="#type-process.Write" class="anchor"></a><code><span class="keyword">| </span></code><code>`Write<span class="keyword"> of </span>Cstruct.t<span class="keyword"> * </span>int<span class="keyword"> * </span>int<span class="keyword"> * </span>(int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a>)</code></td></tr><tr id="type-process.Error" class="anchored"><td class="def constructor"><a href="#type-process.Error" class="anchor"></a><code><span class="keyword">| </span></code><code>`Error<span class="keyword"> of </span><a href="Decoder/index.html#type-error">Decoder.error</a><span class="keyword"> * </span>Cstruct.t<span class="keyword"> * </span>int</code></td></tr><tr id="type-process.result" class="anchored"><td class="def type"><a href="#type-process.result" class="anchor"></a><code><span class="keyword">| </span></code><code><a href="index.html#type-result">result</a></code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The expected actions by the context.</p></div></div><div class="spec val" id="val-encode"><a href="#val-encode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>encode : <a href="Encoder/index.html#type-action">Encoder.action</a> <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a></code></div><div class="doc"><p><code class="code">encode action k ctx</code> starts to encode an <code class="code">action</code> in the context <code class="code">ctx</code>
and call <code class="code">k</code> at the end of the encoding.</p></div></div><div class="spec val" id="val-decode"><a href="#val-decode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>decode : <span class="type-var">'a</span> <a href="Decoder/index.html#type-transaction">Decoder.transaction</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a></code></div><div class="doc"><p><code class="code">decode t k ctx</code> starts to decode an expected <a href="Decoder/index.html#type-transaction">Decoder.transaction</a><code class="code">t</code>
and call <code class="code">k</code> at the end of the decoding.</p></div></div><div class="spec val" id="val-pp_result"><a href="#val-pp_result" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_result : <a href="index.html#type-result">result</a> Fmt.t</code></div><div class="doc"><p>Pretty-print of <a href="index.html#type-result">result</a>.</p></div></div><div class="spec type" id="type-action"><a href="#type-action" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>action</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-action.GitProtoRequest" class="anchored"><td class="def constructor"><a href="#type-action.GitProtoRequest" class="anchor"></a><code><span class="keyword">| </span></code><code>`GitProtoRequest<span class="keyword"> of </span><a href="Common/index.html#type-git_proto_request">Common.git_proto_request</a></code></td></tr><tr id="type-action.Shallow" class="anchored"><td class="def constructor"><a href="#type-action.Shallow" class="anchor"></a><code><span class="keyword">| </span></code><code>`Shallow<span class="keyword"> of </span><a href="index.html#module-Hash">Hash</a>.t list</code></td></tr><tr id="type-action.UploadRequest" class="anchored"><td class="def constructor"><a href="#type-action.UploadRequest" class="anchor"></a><code><span class="keyword">| </span></code><code>`UploadRequest<span class="keyword"> of </span><a href="Common/index.html#type-upload_request">Common.upload_request</a></code></td></tr><tr id="type-action.UpdateRequest" class="anchored"><td class="def constructor"><a href="#type-action.UpdateRequest" class="anchor"></a><code><span class="keyword">| </span></code><code>`UpdateRequest<span class="keyword"> of </span><a href="Common/index.html#type-update_request">Common.update_request</a></code></td></tr><tr id="type-action.Has" class="anchored"><td class="def constructor"><a href="#type-action.Has" class="anchor"></a><code><span class="keyword">| </span></code><code>`Has<span class="keyword"> of </span><a href="Hash/index.html#module-Set">Hash.Set</a>.t</code></td></tr><tr id="type-action.Done" class="anchored"><td class="def constructor"><a href="#type-action.Done" class="anchor"></a><code><span class="keyword">| </span></code><code>`Done</code></td></tr><tr id="type-action.Flush" class="anchored"><td class="def constructor"><a href="#type-action.Flush" class="anchor"></a><code><span class="keyword">| </span></code><code>`Flush</code></td></tr><tr id="type-action.ReceivePACK" class="anchored"><td class="def constructor"><a href="#type-action.ReceivePACK" class="anchor"></a><code><span class="keyword">| </span></code><code>`ReceivePACK</code></td></tr><tr id="type-action.SendPACK" class="anchored"><td class="def constructor"><a href="#type-action.SendPACK" class="anchor"></a><code><span class="keyword">| </span></code><code>`SendPACK<span class="keyword"> of </span>int</code></td></tr><tr id="type-action.FinishPACK" class="anchored"><td class="def constructor"><a href="#type-action.FinishPACK" class="anchor"></a><code><span class="keyword">| </span></code><code>`FinishPACK</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>Close to <a href="Encoder/index.html#type-action">Encoder.action</a> but more exhaustive and context-dependant.</p></div></div><div class="spec val" id="val-run"><a href="#val-run" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>run : <a href="index.html#type-context">context</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-action">action</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-process">process</a></code></div><div class="doc"><p><code class="code">run ctx action</code> sends an action to the server and schedule a specific
<a href="Decoder/index.html#type-transaction">Decoder.transaction</a> then.</p></div></div><div class="spec val" id="val-context"><a href="#val-context" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>context : <a href="Common/index.html#type-git_proto_request">Common.git_proto_request</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-context">context</a><span class="keyword"> * </span><a href="index.html#type-process">process</a></code></div><div class="doc"><p><code class="code">context request</code> makes a new context and the continuation of the
transport.</p></div></div></body></html>