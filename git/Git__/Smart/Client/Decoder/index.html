<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Decoder (git.Git__.Smart.Client.Decoder)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../../index.html">git</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Git__.Smart.Client.Decoder</span></h1></header><div class="doc"><p>The <a href="index.html">Decoder</a> module constrained by the same <code class="code">Hash</code> module.</p></div><div class="spec module" id="module-Hash"><a href="#module-Hash" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Hash/index.html">Hash</a> : <a href="../../../S/index.html#module-type-HASH">Git__.S.HASH</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Reference"><a href="#module-Reference" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Reference/index.html">Reference</a> : <a href="../../../../Git/Reference/index.html#module-type-S">Git.Reference.S</a><span class="keyword"> with </span><span class="keyword">module </span><a href="../../../../Git/Reference/module-type-S/Hash/index.html">Hash</a> := <a href="index.html#module-Hash">Hash</a></code></div><div class="doc"></div></div><div class="spec module" id="module-Common"><a href="#module-Common" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Common/index.html">Common</a> : <a href="../../index.html#module-type-COMMON">COMMON</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../../module-type-COMMON/index.html#type-hash">hash</a> := <a href="index.html#module-Hash">Hash</a>.t<span class="keyword"> and </span><span class="keyword">type </span><a href="../../module-type-COMMON/index.html#type-reference">reference</a> := <a href="Reference/index.html#type-t">Reference.t</a></code></div><div class="doc"></div></div><div class="spec type" id="type-decoder"><a href="#type-decoder" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>decoder</code><code></code><code></code></div><div class="doc"><p>The type decoder.</p></div></div><div class="spec val" id="val-pp_decoder"><a href="#val-pp_decoder" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_decoder : <a href="index.html#type-decoder">decoder</a> Fmt.t</code></div><div class="doc"><p>Pretty-printer of <a href="index.html#type-decoder">decoder</a>.</p></div></div><div class="spec type" id="type-error"><a href="#type-error" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>error</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-error.Expected_char" class="anchored"><td class="def constructor"><a href="#type-error.Expected_char" class="anchor"></a><code><span class="keyword">| </span></code><code>`Expected_char<span class="keyword"> of </span>char</code></td></tr><tr id="type-error.Unexpected_char" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_char" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_char<span class="keyword"> of </span>char</code></td></tr><tr id="type-error.Unexpected_flush_pkt_line" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_flush_pkt_line" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_flush_pkt_line</code></td></tr><tr id="type-error.No_assert_predicate" class="anchored"><td class="def constructor"><a href="#type-error.No_assert_predicate" class="anchor"></a><code><span class="keyword">| </span></code><code>`No_assert_predicate<span class="keyword"> of </span>char <span class="keyword">&#8209;&gt;</span> bool</code></td></tr><tr id="type-error.Expected_string" class="anchored"><td class="def constructor"><a href="#type-error.Expected_string" class="anchor"></a><code><span class="keyword">| </span></code><code>`Expected_string<span class="keyword"> of </span>string</code></td></tr><tr id="type-error.Unexpected_empty_pkt_line" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_empty_pkt_line" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_empty_pkt_line</code></td></tr><tr id="type-error.Malformed_pkt_line" class="anchored"><td class="def constructor"><a href="#type-error.Malformed_pkt_line" class="anchor"></a><code><span class="keyword">| </span></code><code>`Malformed_pkt_line</code></td></tr><tr id="type-error.Unexpected_end_of_input" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_end_of_input" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_end_of_input</code></td></tr><tr id="type-error.Unexpected_pkt_line" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_pkt_line" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_pkt_line</code></td></tr><tr id="type-error.Unexpected_hashes" class="anchored"><td class="def constructor"><a href="#type-error.Unexpected_hashes" class="anchor"></a><code><span class="keyword">| </span></code><code>`Unexpected_hashes<span class="keyword"> of </span><a href="index.html#module-Hash">Hash</a>.t<span class="keyword"> * </span><a href="index.html#module-Hash">Hash</a>.t</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The type error.</p></div></div><div class="spec val" id="val-pp_error"><a href="#val-pp_error" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp_error : <a href="index.html#type-error">error</a> Fmt.t</code></div><div class="doc"><p>Pretty-printer of <a href="index.html#type-error">error</a>.</p></div></div><div class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a state</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-state.Ok" class="anchored"><td class="def constructor"><a href="#type-state.Ok" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Ok</span><span class="keyword"> of </span><span class="type-var">'a</span></code></td><td class="doc"><p>(** The end value of the decoding. *)</p></td></tr><tr id="type-state.Read" class="anchored"><td class="def constructor"><a href="#type-state.Read" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Read</span><span class="keyword"> of </span></code><code>{</code><table class="record"><tr id="type-state.buffer" class="anchored"><td class="def field"><a href="#type-state.buffer" class="anchor"></a><code>buffer : Cstruct.t;</code></td></tr><tr id="type-state.off" class="anchored"><td class="def field"><a href="#type-state.off" class="anchor"></a><code>off : int;</code></td></tr><tr id="type-state.len" class="anchored"><td class="def field"><a href="#type-state.len" class="anchor"></a><code>len : int;</code></td></tr><tr id="type-state.continue" class="anchored"><td class="def field"><a href="#type-state.continue" class="anchor"></a><code>continue : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-state">state</a>;</code></td></tr></table><code>}</code><code></code></td><td class="doc"><p>(** Means that we expect an input. We provide an <span class="xref-unresolved" title="unresolved reference to &quot;Cstruct.t&quot;">Cstruct.t</span> with an
offset and a length. The client is able to <span class="xref-unresolved" title="unresolved reference to &quot;Cstruct.blit&quot;">Cstruct.blit</span> the
input in this range. Then, he can call <code class="code">continue</code> with how many
byte(s) he read. *)</p></td></tr><tr id="type-state.Error" class="anchored"><td class="def constructor"><a href="#type-state.Error" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Error</span><span class="keyword"> of </span></code><code>{</code><table class="record"><tr id="type-state.err" class="anchored"><td class="def field"><a href="#type-state.err" class="anchor"></a><code>err : <a href="index.html#type-error">error</a>;</code></td></tr><tr id="type-state.buf" class="anchored"><td class="def field"><a href="#type-state.buf" class="anchor"></a><code>buf : Cstruct.t;</code></td></tr><tr id="type-state.committed" class="anchored"><td class="def field"><a href="#type-state.committed" class="anchor"></a><code>committed : int;</code></td></tr></table><code>}</code><code></code></td><td class="doc"><p>(** When we retrieve an error, we return this value with how many
byte(s) we processed and the current input. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-transaction"><a href="#type-transaction" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>_ transaction</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-transaction.HttpReferenceDiscovery" class="anchored"><td class="def constructor"><a href="#type-transaction.HttpReferenceDiscovery" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">HttpReferenceDiscovery</span><span class="keyword"> : </span>string <span class="keyword">&#8209;&gt;</span> <a href="Common/index.html#type-advertised_refs">Common.advertised_refs</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.ReferenceDiscovery" class="anchored"><td class="def constructor"><a href="#type-transaction.ReferenceDiscovery" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ReferenceDiscovery</span> <span class="keyword">:</span> <a href="Common/index.html#type-advertised_refs">Common.advertised_refs</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.ShallowUpdate" class="anchored"><td class="def constructor"><a href="#type-transaction.ShallowUpdate" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ShallowUpdate</span> <span class="keyword">:</span> <a href="Common/index.html#type-shallow_update">Common.shallow_update</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.Negociation" class="anchored"><td class="def constructor"><a href="#type-transaction.Negociation" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Negociation</span><span class="keyword"> : </span><a href="Hash/index.html#module-Set">Hash.Set</a>.t<span class="keyword"> * </span><a href="index.html#type-ack_mode">ack_mode</a> <span class="keyword">&#8209;&gt;</span> <a href="Common/index.html#type-acks">Common.acks</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.NegociationResult" class="anchored"><td class="def constructor"><a href="#type-transaction.NegociationResult" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">NegociationResult</span> <span class="keyword">:</span> <a href="Common/index.html#type-negociation_result">Common.negociation_result</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.PACK" class="anchored"><td class="def constructor"><a href="#type-transaction.PACK" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">PACK</span><span class="keyword"> : </span><a href="index.html#type-side_band">side_band</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-flow">flow</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.ReportStatus" class="anchored"><td class="def constructor"><a href="#type-transaction.ReportStatus" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">ReportStatus</span><span class="keyword"> : </span><a href="index.html#type-side_band">side_band</a> <span class="keyword">&#8209;&gt;</span> <a href="Common/index.html#type-report_status">Common.report_status</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.HttpReportStatus" class="anchored"><td class="def constructor"><a href="#type-transaction.HttpReportStatus" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">HttpReportStatus</span><span class="keyword"> : </span>string list<span class="keyword"> * </span><a href="index.html#type-side_band">side_band</a> <span class="keyword">&#8209;&gt;</span> <a href="Common/index.html#type-report_status">Common.report_status</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.Upload_request" class="anchored"><td class="def constructor"><a href="#type-transaction.Upload_request" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Upload_request</span> <span class="keyword">:</span> <a href="Common/index.html#type-upload_request">Common.upload_request</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.Git_proto_request" class="anchored"><td class="def constructor"><a href="#type-transaction.Git_proto_request" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Git_proto_request</span> <span class="keyword">:</span> <a href="Common/index.html#type-git_proto_request">Common.git_proto_request</a> <a href="index.html#type-transaction">transaction</a></code></td></tr><tr id="type-transaction.Update_request" class="anchored"><td class="def constructor"><a href="#type-transaction.Update_request" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Update_request</span> <span class="keyword">:</span> <a href="Common/index.html#type-update_request">Common.update_request</a> <a href="index.html#type-transaction">transaction</a></code></td></tr></table><code></code></div><div class="doc"><p>The type transaction to describe what is expected to decode/receive.</p></div></div><div class="spec type" id="type-ack_mode"><a href="#type-ack_mode" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>ack_mode</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-ack_mode.Ack" class="anchored"><td class="def constructor"><a href="#type-ack_mode.Ack" class="anchor"></a><code><span class="keyword">| </span></code><code>`Ack</code></td></tr><tr id="type-ack_mode.Multi_ack" class="anchored"><td class="def constructor"><a href="#type-ack_mode.Multi_ack" class="anchor"></a><code><span class="keyword">| </span></code><code>`Multi_ack</code></td></tr><tr id="type-ack_mode.Multi_ack_detailed" class="anchored"><td class="def constructor"><a href="#type-ack_mode.Multi_ack_detailed" class="anchor"></a><code><span class="keyword">| </span></code><code>`Multi_ack_detailed</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The ACK mode type to describe which mode is shared by the client and the
server.</p></div></div><div class="spec type" id="type-flow"><a href="#type-flow" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>flow</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-flow.Raw" class="anchored"><td class="def constructor"><a href="#type-flow.Raw" class="anchor"></a><code><span class="keyword">| </span></code><code>`Raw<span class="keyword"> of </span>Cstruct.t</code></td></tr><tr id="type-flow.End" class="anchored"><td class="def constructor"><a href="#type-flow.End" class="anchor"></a><code><span class="keyword">| </span></code><code>`End</code></td></tr><tr id="type-flow.Err" class="anchored"><td class="def constructor"><a href="#type-flow.Err" class="anchor"></a><code><span class="keyword">| </span></code><code>`Err<span class="keyword"> of </span>Cstruct.t</code></td></tr><tr id="type-flow.Out" class="anchored"><td class="def constructor"><a href="#type-flow.Out" class="anchor"></a><code><span class="keyword">| </span></code><code>`Out<span class="keyword"> of </span>Cstruct.t</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The representation of the output side-band.</p></div></div><div class="spec type" id="type-side_band"><a href="#type-side_band" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>side_band</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-side_band.Side_band" class="anchored"><td class="def constructor"><a href="#type-side_band.Side_band" class="anchor"></a><code><span class="keyword">| </span></code><code>`Side_band</code></td></tr><tr id="type-side_band.Side_band_64k" class="anchored"><td class="def constructor"><a href="#type-side_band.Side_band_64k" class="anchor"></a><code><span class="keyword">| </span></code><code>`Side_band_64k</code></td></tr><tr id="type-side_band.No_multiplexe" class="anchored"><td class="def constructor"><a href="#type-side_band.No_multiplexe" class="anchor"></a><code><span class="keyword">| </span></code><code>`No_multiplexe</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>The side-band mode type to describe which mode is shared by the client
and the server.</p></div></div><div class="spec val" id="val-decode"><a href="#val-decode" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>decode : <a href="index.html#type-decoder">decoder</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'result</span> <a href="index.html#type-transaction">transaction</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'result</span> <a href="index.html#type-state">state</a></code></div><div class="doc"><p><code class="code">decode decoder transaction</code> decodes the input represented by <code class="code">decoder</code>
in the way of the <code class="code">transaction</code> and returns the value expected and
described by <code class="code">transaction</code> or an error.</p></div></div><div class="spec val" id="val-decoder"><a href="#val-decoder" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>decoder : unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-decoder">decoder</a></code></div><div class="doc"><p><code class="code">decoder ()</code> makes a new decoder.</p></div></div><div class="spec val" id="val-of_string"><a href="#val-of_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string : string <span class="keyword">&#8209;&gt;</span> <span class="type-var">'v</span> <a href="index.html#type-transaction">transaction</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'v</span>, <a href="index.html#type-error">error</a><span class="keyword"> * </span>Cstruct.t<span class="keyword"> * </span>int) Stdlib.result</code></div><div class="doc"></div></div></body></html>