<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="Start" href="index.html">
<link rel="previous" href="Git_mirage.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Git" rel="Chapter" href="Git.html">
<link title="Git_unix" rel="Chapter" href="Git_unix.html">
<link title="Git_mirage" rel="Chapter" href="Git_mirage.html">
<link title="Git_http" rel="Chapter" href="Git_http.html"><title>Git_http</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Git_mirage.html" title="Git_mirage">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Git_http.html">Git_http</a></h1>

<pre><span class="keyword">module</span> Git_http: <code class="code"><span class="keyword">sig</span></code> <a href="Git_http.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
HTTP helpers to implement Git's Smart-HTTP protocol.
<p>

    The "smart" HTTP connection simulate normal channel by a sequence
    of RPC calls (the HTTP requests and responses) by:
<p>

    <ul>
<li>allowing a read only after a write: the write is in the HTTP
    request, the read is in the HTTP response.</li>
<li>replaying all the previous communication in both direction
    everytime. The new thing to read or write is appended to the
    history and part of a new RPC.</li>
</ul>

<p>

    This looks like a terrible idea, but in practice there are very
    few round-trips between the client and the server with relatively
    small amount of data. These round trips correspond to the
    negociation phase, where the client and the server needs to find
    which hashes they have in common. Once this is done, the final RPC
    response contains the pack file, which is where most of the data
    are.
<p>

    The good thing with that scheme (I guess) is that the server
    doesn't have to keep any client state. Note: there are more
    clever way to do this ...
<p>

    That module implements a "restartable" HTTP channels, which hides
    all that reconnection and replay complexity behind an usual
    channel interface.<br>
</div>
<hr width="100%">

<pre><span class="keyword">module type</span> <a href="Git_http.CLIENT.html">CLIENT</a> = <code class="code"><span class="keyword">sig</span></code> <a href="Git_http.CLIENT.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>
<pre><span class="keyword">module type</span> <a href="Git_http.CHAN.html">CHAN</a> = <code class="code"><span class="keyword">sig</span></code> <a href="Git_http.CHAN.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
The module type for buildable channels (see <a href="Git_http.CHAN.html#VALmake"><code class="code"><span class="constructor">Git_http</span>.<span class="constructor">CHAN</span>.make</code></a>).
</div>

<pre><span class="keyword">module</span> <a href="Git_http.Flow.html">Flow</a>: <div class="sig_block"><code class="code"><span class="keyword">functor</span>&nbsp;(</code><code class="code"><span class="constructor">HTTP</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="Git_http.CLIENT.html">CLIENT</a></code><code class="code">)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;</code><div class="sig_block"><code class="code"><span class="keyword">functor</span>&nbsp;(</code><code class="code"><span class="constructor">IC</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="Git_http.CHAN.html">CHAN</a></code><code class="code">)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;</code><div class="sig_block"><code class="code"><span class="keyword">functor</span>&nbsp;(</code><code class="code"><span class="constructor">OC</span></code><code class="code">&nbsp;:&nbsp;</code><code class="type"><a href="Git_http.CHAN.html">CHAN</a></code><code class="code">)&nbsp;<span class="keywordsign">-&gt;</span>&nbsp;</code><code class="code"><span class="keyword">sig</span></code> <a href="Git_http.Flow.html">..</a> <code class="code"><span class="keyword">end</span></code></div></div></div></pre></body></html>