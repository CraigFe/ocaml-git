<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ref (git.Git.Store.Make.Ref)</title><link rel="stylesheet" href="../../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../../index.html">git</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Git.Store.Make.Ref</span></h1></header><div class="spec val" id="val-mem"><a href="#val-mem" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mem : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> bool Lwt.t</code></div><div class="doc"><p><code class="code">mem state ref</code> is <code class="code">true</code> iff <code class="code">ref</code> exists in <code class="code">state</code>, otherwise it is
<code class="code">false</code>.</p></div></div><div class="spec val" id="val-graph"><a href="#val-graph" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>graph : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<a href="../index.html#module-Hash">Hash</a>.t <a href="../Reference/index.html#module-Map">Reference.Map</a>.t, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"><p><code class="code">graph state</code> is the graph containing all the references and their
relationship in the current git repository <code class="code">state</code>.</p></div></div><div class="spec val" id="val-normalize"><a href="#val-normalize" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>normalize : <a href="../index.html#module-Hash">Hash</a>.t <a href="../Reference/index.html#module-Map">Reference.Map</a>.t <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-head_contents">Reference.head_contents</a> <span class="keyword">&#8209;&gt;</span> (<a href="../index.html#module-Hash">Hash</a>.t, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"><p><code class="code">normalize graph ref</code> is the final hash pointed by the reference <code class="code">ref</code>.
This function can return an error:</p><ul><li><code class="code">`Invalid_reference ref</code> if, from the graph <code class="code">graph</code>, we don't
find the final pointed hash. This case can appear if the graph is not
complete or if the link is broken.</li></ul></div></div><div class="spec val" id="val-list"><a href="#val-list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>list : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<a href="../Reference/index.html#type-t">Reference.t</a><span class="keyword"> * </span><a href="../index.html#module-Hash">Hash</a>.t) list Lwt.t</code></div><div class="doc"><p><code class="code">list state</code> is the list of references and their associated hash. This
function is the same than:</p><p>&gt; graph state &gt;|= Reference.Map.fold (fun x acc -&gt; x :: acc)</p><p>Finally, as for <a href="index.html#val-graph">graph</a>, if we encountered any <a href="../index.html#type-error">error</a>, we make it
silent and continue the process.</p></div></div><div class="spec val" id="val-remove"><a href="#val-remove" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>remove : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> (unit, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"><p><code class="code">remove state reference</code> removes the reference <code class="code">reference</code> from the git
repository <code class="code">state</code>.</p></div></div><div class="spec val" id="val-read"><a href="#val-read" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="../Reference/index.html#type-head_contents">Reference.head_contents</a>, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"><p><code class="code">read state reference</code> is the value contained in the reference
<code class="code">reference</code> (available in the git repository <code class="code">state</code>).</p></div></div><div class="spec val" id="val-resolve"><a href="#val-resolve" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>resolve : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> (<a href="../index.html#module-Hash">Hash</a>.t, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-write"><a href="#val-write" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>write : <a href="../index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-t">Reference.t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Reference/index.html#type-head_contents">Reference.head_contents</a> <span class="keyword">&#8209;&gt;</span> (unit, <a href="../index.html#type-error">error</a>) Stdlib.result Lwt.t</code></div><div class="doc"><p><code class="code">write state reference value</code> writes the value <code class="code">value</code> in the the
<code class="code">reference</code> in the git repository <code class="code">state</code>.</p></div></div></body></html>